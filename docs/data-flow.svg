<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="655pt" height="980" viewBox="0 0 655 735"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 731)"><title>Dataflow</title><polygon fill="#fff" stroke="transparent" points="-4 4 -4 -731 651 -731 651 4 -4 4"/><g id="clust1" class="cluster"><title>cluster_legends</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="8 -503 8 -683 190 -683 190 -503 8 -503"/><text x="99" y="-671" font-family="Times,serif" font-size="10" text-anchor="middle">Legend</text></g><g id="clust2" class="cluster"><title>cluster_tikv</title><polygon fill="none" stroke="#d3d3d3" points="557 -394 557 -578 639 -578 639 -394 557 -394"/><text x="598" y="-562.8" font-family="Times,serif" font-size="14" text-anchor="middle">TiKV</text></g><g id="clust3" class="cluster"><title>cluster_ticdc</title><polygon fill="none" stroke="#d3d3d3" points="198 -63 198 -719 549 -719 549 -63 198 -63"/><text x="373.5" y="-703.8" font-family="Times,serif" font-size="14" text-anchor="middle">TiCDC</text></g><g id="clust4" class="cluster"><title>cluster_kvclient</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="457 -612 457 -687 541 -687 541 -612 457 -612"/><text x="499" y="-671.8" font-family="Times,serif" font-size="14" text-anchor="middle">KV client</text></g><g id="clust5" class="cluster"><title>cluster_processor</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="267 -394 267 -469 501 -469 501 -394 267 -394"/><text x="384" y="-453.8" font-family="Times,serif" font-size="14" text-anchor="middle">Processor</text></g><g id="clust6" class="cluster"><title>cluster_puller</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="241 -502 241 -688 419 -688 419 -502 241 -502"/><text x="330" y="-672.8" font-family="Times,serif" font-size="14" text-anchor="middle">Puller</text></g><g id="clust7" class="cluster"><title>cluster_sorter</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="444 -247 444 -361 541 -361 541 -247 444 -247"/><text x="492.5" y="-345.8" font-family="Times,serif" font-size="14" text-anchor="middle">Sorter</text></g><g id="clust8" class="cluster"><title>cluster_entry_sorter</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="452 -255 452 -330 533 -330 533 -255 452 -255"/><text x="492.5" y="-314.8" font-family="Times,serif" font-size="14" text-anchor="middle">Entry sorter</text></g><g id="clust9" class="cluster"><title>cluster_mounter</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="342 -255 342 -330 436 -330 436 -255 342 -255"/><text x="389" y="-314.8" font-family="Times,serif" font-size="14" text-anchor="middle">Mounter</text></g><g id="clust10" class="cluster"><title>cluster_sink</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="206 -71 206 -331 334 -331 334 -71 206 -71"/><text x="270" y="-315.8" font-family="Times,serif" font-size="14" text-anchor="middle">Sink Manager</text></g><g id="node1" class="node"><title>flow</title><polygon fill="#fff" stroke="#fff" points="182 -656 108 -656 108 -620 182 -620 182 -656"/><text x="145" y="-635.5" font-family="Times,serif" font-size="10" text-anchor="middle">Go routine #1</text></g><g id="node2" class="node"><title>flow_</title><polygon fill="#fff" stroke="#fff" points="182 -547 108 -547 108 -511 182 -511 182 -547"/><text x="145" y="-526.5" font-family="Times,serif" font-size="10" text-anchor="middle">Go routine #2</text></g><g id="edge1" class="edge"><title>flow-&gt;flow_</title><path fill="none" stroke="#000" d="M145,-619.81C145,-602.96 145,-577.02 145,-557.34"/><polygon fill="#000" stroke="#000" points="148.5 -557.15 145 -547.15 141.5 -557.15 148.5 -557.15"/><text x="126.5" y="-561.15" font-family="Times,serif" font-size="10" text-anchor="middle">Flow</text><text x="126.5" y="-550.15" font-family="Times,serif" font-size="10" text-anchor="middle">direction</text><text x="127.5" y="-611.81" font-family="Times,serif" font-size="10" text-anchor="middle">Channel</text><text x="127.5" y="-600.81" font-family="Times,serif" font-size="10" text-anchor="middle">/Buffer</text></g><g id="node3" class="node"><title>wait</title><polygon fill="#fff" stroke="#fff" points="90 -656 16 -656 16 -620 90 -620 90 -656"/><text x="53" y="-635.5" font-family="Times,serif" font-size="10" text-anchor="middle">Go routine #1</text></g><g id="node4" class="node"><title>wait_</title><polygon fill="#fff" stroke="#fff" points="90 -547 16 -547 16 -511 90 -511 90 -547"/><text x="53" y="-526.5" font-family="Times,serif" font-size="10" text-anchor="middle">Go routine #2</text></g><g id="edge2" class="edge"><title>wait-&gt;wait_</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M53,-619.81C53,-602.96 53,-577.02 53,-557.34"/><polygon fill="#000" stroke="#000" points="56.5 -557.15 53 -547.15 49.5 -557.15 56.5 -557.15"/><text x="29" y="-611.81" font-family="Times,serif" font-size="10" text-anchor="middle">#1 wiats #2</text></g><g id="node5" class="node"><title>Raftstore</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="631 -547 565 -547 565 -511 631 -511 631 -547"/><text x="598" y="-525.3" font-family="Times,serif" font-size="14" text-anchor="middle">Raftstore</text></g><g id="node6" class="node"><title>CDC</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="619 -438 565 -438 565 -402 619 -402 619 -438"/><text x="592" y="-416.3" font-family="Times,serif" font-size="14" text-anchor="middle">CDC</text></g><g id="edge3" class="edge"><title>Raftstore-&gt;CDC</title><path fill="none" stroke="#000" d="M597.04,-510.81C596.09,-493.96 594.64,-468.02 593.53,-448.34"/><polygon fill="#000" stroke="#000" points="597.02 -447.94 592.96 -438.15 590.03 -448.33 597.02 -447.94"/><text x="616.5" y="-480.8" font-family="Times,serif" font-size="14" text-anchor="middle">channel</text></g><g id="node7" class="node"><title>kv_client</title><polygon fill="#fff" stroke="#fff" points="532.5 -656 465.5 -656 465.5 -620 532.5 -620 532.5 -656"/><text x="499" y="-634.3" font-family="Times,serif" font-size="14" text-anchor="middle">kv_client</text></g><g id="edge4" class="edge"><title>CDC-&gt;kv_client</title><path fill="none" stroke="#000" d="M572.39,-438.27C556.48,-453.44 534.82,-476.94 523,-502 506.59,-536.78 501.34,-581.43 499.69,-609.64"/><polygon fill="#000" stroke="#000" points="496.18 -609.79 499.21 -619.94 503.17 -610.11 496.18 -609.79"/><text x="539.5" y="-525.3" font-family="Times,serif" font-size="14" text-anchor="middle">gRPC</text></g><g id="node8" class="node"><title>puller_run_step1</title><polygon fill="#fff" stroke="#fff" points="402 -657 252 -657 252 -619 402 -619 402 -657"/><text x="327" y="-641.8" font-family="Times,serif" font-size="14" text-anchor="middle">Run #1</text><text x="327" y="-626.8" font-family="Times,serif" font-size="14" text-anchor="middle">(Add to memory buffer)</text></g><g id="edge5" class="edge"><title>kv_client-&gt;puller_run_step1</title><path fill="none" stroke="#000" d="M465.32,-638C450.02,-638 431.15,-638 412.32,-638"/><polygon fill="#000" stroke="#000" points="412.19 -634.5 402.19 -638 412.19 -641.5 412.19 -634.5"/><text x="433.75" y="-644.8" font-family="Times,serif" font-size="14" text-anchor="middle">eventCh</text></g><g id="node12" class="node"><title>puller_run_step2</title><polygon fill="#fff" stroke="#fff" points="410.5 -548 249.5 -548 249.5 -510 410.5 -510 410.5 -548"/><text x="330" y="-532.8" font-family="Times,serif" font-size="14" text-anchor="middle">Run #2</text><text x="330" y="-517.8" font-family="Times,serif" font-size="14" text-anchor="middle">(Output to output channel)</text></g><g id="edge7" class="edge"><title>puller_run_step1-&gt;puller_run_step2</title><path fill="none" stroke="#000" d="M327.51,-618.85C327.97,-602.32 328.66,-577.66 329.2,-558.5"/><polygon fill="#000" stroke="#000" points="332.71 -558.33 329.49 -548.24 325.71 -558.14 332.71 -558.33"/><text x="350.5" y="-589.8" font-family="Times,serif" font-size="14" text-anchor="middle">P.buffer</text></g><g id="node9" class="node"><title>processor_sorter_consume</title><polygon fill="#fff" stroke="#fff" points="374.5 -438 275.5 -438 275.5 -402 374.5 -402 374.5 -438"/><text x="325" y="-416.3" font-family="Times,serif" font-size="14" text-anchor="middle">sorterConsume</text></g><g id="node11" class="node"><title>table_sink_run</title><polygon fill="#fff" stroke="#fff" points="312 -300 214 -300 214 -262 312 -262 312 -300"/><text x="263" y="-284.8" font-family="Times,serif" font-size="14" text-anchor="middle">Table Sink (N)</text><text x="263" y="-269.8" font-family="Times,serif" font-size="14" text-anchor="middle">FlushEvents</text></g><g id="edge6" class="edge"><title>processor_sorter_consume-&gt;table_sink_run</title><path fill="none" stroke="#000" d="M276.15,-401.81C268.91,-397.14 262.42,-391.3 258,-384 244.52,-361.75 248.14,-331.49 253.68,-309.71"/><polygon fill="#000" stroke="#000" points="257.05 -310.65 256.4 -300.07 250.32 -308.75 257.05 -310.65"/><text x="280.5" y="-372.8" font-family="Times,serif" font-size="14" text-anchor="middle">P.output</text></g><g id="node14" class="node"><title>mounter_unmarshal</title><polygon fill="#fff" stroke="#fff" points="427.5 -299 350.5 -299 350.5 -263 427.5 -263 427.5 -299"/><text x="389" y="-277.3" font-family="Times,serif" font-size="14" text-anchor="middle">Unmarshal</text></g><g id="edge11" class="edge"><title>processor_sorter_consume-&gt;mounter_unmarshal</title><path fill="none" stroke="#000" d="M321.55,-401.78C320.4,-391.64 320.57,-378.9 326,-369 329.08,-363.38 333.5,-365.57 338,-361 353.33,-345.45 366.56,-324.58 375.7,-308.2"/><polygon fill="#000" stroke="#000" points="378.92 -309.61 380.6 -299.15 372.76 -306.28 378.92 -309.61"/><text x="355" y="-372.8" font-family="Times,serif" font-size="14" text-anchor="middle">unmarshal</text></g><g id="node10" class="node"><title>processor_puller_consume</title><polygon fill="#fff" stroke="#fff" points="493 -438 393 -438 393 -402 493 -402 493 -438"/><text x="443" y="-416.3" font-family="Times,serif" font-size="14" text-anchor="middle">pullerConsume</text></g><g id="node13" class="node"><title>sorter_run</title><polygon fill="#fff" stroke="#fff" points="514 -299 460 -299 460 -263 514 -263 514 -299"/><text x="487" y="-277.3" font-family="Times,serif" font-size="14" text-anchor="middle">Run</text></g><g id="edge9" class="edge"><title>processor_puller_consume-&gt;sorter_run</title><path fill="none" stroke="#000" d="M448.48,-401.93C455.96,-378.65 469.43,-336.7 478.3,-309.1"/><polygon fill="#000" stroke="#000" points="481.72 -309.88 481.45 -299.29 475.06 -307.74 481.72 -309.88"/><text x="492" y="-372.8" font-family="Times,serif" font-size="14" text-anchor="middle">E.AddEntry</text></g><g id="node15" class="node"><title>buffer_sink_run</title><polygon fill="#fff" stroke="#fff" points="314 -206 214 -206 214 -168 314 -168 314 -206"/><text x="264" y="-190.8" font-family="Times,serif" font-size="14" text-anchor="middle">Buffer Sink (1)</text><text x="264" y="-175.8" font-family="Times,serif" font-size="14" text-anchor="middle">FlushEvents</text></g><g id="edge12" class="edge"><title>table_sink_run-&gt;buffer_sink_run</title><path fill="none" stroke="#000" d="M263.2,-261.82C263.34,-248.85 263.53,-231.13 263.69,-216.31"/><polygon fill="#000" stroke="#000" points="267.19 -216.18 263.8 -206.14 260.19 -216.1 267.19 -216.18"/><text x="302" y="-227.8" font-family="Times,serif" font-size="14" text-anchor="middle">S.EmitEvents</text></g><g id="edge8" class="edge"><title>puller_run_step2-&gt;processor_puller_consume</title><path fill="none" stroke="#000" d="M349.17,-509.85C367.93,-492.08 396.63,-464.91 417.35,-445.29"/><polygon fill="#000" stroke="#000" points="420.01 -447.59 424.86 -438.18 415.19 -442.51 420.01 -447.59"/><text x="408" y="-480.8" font-family="Times,serif" font-size="14" text-anchor="middle">P.Output</text></g><g id="edge10" class="edge"><title>sorter_run-&gt;processor_sorter_consume</title><path fill="none" stroke="#000" d="M481.35,-299.31C474.5,-317.5 461.16,-345.59 440,-361 427.1,-370.39 419.55,-362.46 405,-369 394.54,-373.7 393.61,-377.74 384,-384 377.62,-388.16 370.75,-392.42 364.03,-396.48"/><polygon fill="#000" stroke="#000" points="361.81 -393.73 355.01 -401.86 365.4 -399.74 361.81 -393.73"/><text x="428" y="-372.8" font-family="Times,serif" font-size="14" text-anchor="middle">S.Ouput</text></g><g id="node16" class="node"><title>backend_sink_run</title><polygon fill="#fff" stroke="#fff" points="326 -117 214 -117 214 -79 326 -79 326 -117"/><text x="270" y="-101.8" font-family="Times,serif" font-size="14" text-anchor="middle">Backend Sink (1)</text><text x="270" y="-86.8" font-family="Times,serif" font-size="14" text-anchor="middle">FlushEvents</text></g><g id="edge13" class="edge"><title>buffer_sink_run-&gt;backend_sink_run</title><path fill="none" stroke="#000" d="M265.24,-167.97C266.06,-156.19 267.13,-140.56 268.06,-127.16"/><polygon fill="#000" stroke="#000" points="271.56 -127.22 268.76 -117 264.58 -126.74 271.56 -127.22"/><text x="306" y="-138.8" font-family="Times,serif" font-size="14" text-anchor="middle">S.EmitEvents</text></g><g id="node18" class="node"><title>data_out</title><ellipse cx="270" cy="-18" fill="none" stroke="#000" rx="40.89" ry="18"/><text x="270" y="-14.3" font-family="Times,serif" font-size="14" text-anchor="middle">Data out</text></g><g id="edge15" class="edge"><title>backend_sink_run-&gt;data_out</title><path fill="none" stroke="#000" d="M270,-78.91C270,-69.26 270,-57.18 270,-46.4"/><polygon fill="#000" stroke="#000" points="273.5 -46.19 270 -36.19 266.5 -46.19 273.5 -46.19"/></g><g id="node17" class="node"><title>data_in</title><ellipse cx="598" cy="-638" fill="none" stroke="#000" rx="36.29" ry="18"/><text x="598" y="-634.3" font-family="Times,serif" font-size="14" text-anchor="middle">Data in</text></g><g id="edge14" class="edge"><title>data_in-&gt;Raftstore</title><path fill="none" stroke="#000" d="M598,-619.81C598,-602.96 598,-577.02 598,-557.34"/><polygon fill="#000" stroke="#000" points="601.5 -557.15 598 -547.15 594.5 -557.15 601.5 -557.15"/></g></g></svg>